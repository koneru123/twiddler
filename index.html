<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css"  href="index.css">
  </head>
  <body>
    <div id="btn"><button type="button">Refresh Tweets</button></div>
    <ul id="tweets">
    </ul>
    <script>
      $(document).ready(function(){
        var $body = $('body');
        const tweetsList = $("#tweets");
        const timestampFormat = function(date) {
            var strArray=['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var d = date.getDate();
            var m = strArray[date.getMonth()];
            var y = date.getFullYear();
            var h = date.getHours();
            var min = date.getMinutes();
            //return '' + (d <= 9 ? '0' + d : d) + '-' + m + '-' + y;
            return '' + (d <= 9 ? '0' + d : d) + '-' + m +` ${h}:${min}`;
        }

        function loadTweets() {
            var index = streams.home.length - 1;
            while(index >= 0){
            var tweet = streams.home[index];
            var time = timestampFormat(tweet.created_at);
            var $tweetHtml = $(`<li>@${tweet.user}: ${tweet.message}: ${time}</li>`);
            $tweetHtml.appendTo(tweetsList);
            index -= 1;
          }
        }
        loadTweets();
        $('#btn').click(function() {
          loadTweets();
        })
      });

    </script>

  </body>
</html>